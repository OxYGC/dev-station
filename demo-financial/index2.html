<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ä¸ªäººèµ„é‡‘ç®¡ç†è®¡ç®—å™¨</title>
    <style>
        body {
            font-family: "Helvetica Neue", "PingFang SC", "Microsoft YaHei", sans-serif;
            background: #f9fafb;
            color: #333;
            padding: 20px;
            max-width: 960px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 24px;
        }
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 20px;
        }
        .input-item {
            flex: 1;
            min-width: 200px;
            position: relative;
        }
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            color: #4a5568;
        }
        .input-with-unit {
            display: flex;
            align-items: center;
        }
        .input-with-unit input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 8px 0 0 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .unit-label {
            background: #edf2f7;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-left: none;
            border-radius: 0 8px 8px 0;
            font-size: 16px;
            color: #4a5568;
            min-width: 50px;
            text-align: center;
        }
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 16px 0 12px;
            color: #2d3748;
            padding-bottom: 6px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .currency-toggle {
            font-size: 14px;
            color: #4299e1;
            cursor: pointer;
        }
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }
        .result-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 14px;
            text-align: center;
        }
        .deposit { border-top: 4px solid #4299e1; }
        .stock { border-top: 4px solid #38a169; }
        .crypto { border-top: 4px solid #e53e3e; }
        .result-title {
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 14px;
            color: #2d3748;
        }
        .result-value {
            font-size: 18px;
            font-weight: bold;
            margin: 6px 0;
        }
        .deposit .result-value { color: #2b6cb0; }
        .stock .result-value { color: #2f855a; }
        .crypto .result-value { color: #c53030; }
        .note {
            font-size: 11px;
            color: #718096;
            margin-top: 4px;
        }
        .sources {
            font-size: 13px;
            color: #718096;
            margin-top: 20px;
            padding-top: 16px;
            border-top: 1px dashed #e2e8f0;
        }
        .sources a {
            color: #4299e1;
            text-decoration: none;
        }
        .sources a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<h1>ğŸ’° ä¸ªäººèµ„é‡‘ç®¡ç†è®¡ç®—å™¨</h1>

<div class="card">
    <div class="input-group">
        <div class="input-item">
            <label for="totalFund">å½“å‰èµ„é‡‘æ€»é¢</label>
            <div class="input-with-unit">
                <input type="text" id="totalFund" value="1000000" placeholder="è¯·è¾“å…¥é‡‘é¢">
                <div class="unit-label" id="unit-totalFund">å…ƒ</div>
            </div>
        </div>
        <div class="input-item">
            <label for="investedAmount">å·²æŠ•èµ„é‡‘é¢</label>
            <div class="input-with-unit">
                <input type="text" id="investedAmount" value="24000" placeholder="è¯·è¾“å…¥é‡‘é¢">
                <div class="unit-label" id="unit-investedAmount">å…ƒ</div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="section-title">
        ğŸ¦ é“¶è¡Œå­˜æ¬¾ï¼ˆå¹´åŒ–æ”¶ç›Šï¼‰
        <span class="currency-toggle" id="toggle-deposit">æ˜¾ç¤ºï¼šCNY</span>
    </div>
    <div class="results-grid" id="deposit-results"></div>

    <div class="section-title">
        ğŸ“ˆ è‚¡ç¥¨è¯åˆ¸ï¼ˆå¹´åŒ–æ”¶ç›Šï¼‰
        <span class="currency-toggle" id="toggle-stock">æ˜¾ç¤ºï¼šCNY</span>
    </div>
    <div class="results-grid" id="stock-results"></div>

    <div class="section-title">
        â‚¿ åŠ å¯†è´§å¸ï¼ˆå¹´åŒ–æ”¶ç›Šï¼‰
        <span class="currency-toggle" id="toggle-crypto">æ˜¾ç¤ºï¼šUSD</span>
    </div>
    <div class="results-grid" id="crypto-results"></div>
</div>

<div class="card sources">
    <strong>æ•°æ®æ¥æºä¸è¯´æ˜ï¼š</strong>
    <ul style="margin-top: 8px; padding-left: 20px; font-size: 12px;">
        <li>ä¸­å›½å­˜æ¬¾åˆ©ç‡ (1.5%)ï¼šåŸºäº <a href="http://www.pbc.gov.cn" target="_blank">ä¸­å›½äººæ°‘é“¶è¡Œ2025å¹´åŸºå‡†åˆ©ç‡</a></li>
        <li>ç¾å›½å­˜æ¬¾åˆ©ç‡ (4.3%)ï¼š<a href="https://www.federalreserve.gov" target="_blank">ç¾è”å‚¨2025å¹´æ”¿ç­–åˆ©ç‡åŒºé—´</a></li>
        <li>æ¸¯å¸å­˜æ¬¾åˆ©ç‡ (0.5%)ï¼šå‚è€ƒ <a href="https://www.hkab.org.hk" target="_blank">é¦™æ¸¯é“¶è¡Œå…¬ä¼š2025å¹´å¹³å‡å‚¨è“„åˆ©ç‡</a></li>
        <li>èŒ…å°ã€è‹¹æœã€è‹±ä¼Ÿè¾¾ã€æ¸¯è‚¡å¹³å‡æ”¶ç›Šç‡ï¼šåŸºäº2023â€“2025ä¸‰å¹´å¤åˆå¹´åŒ–å›æŠ¥ä¼°ç®—ï¼Œæ•°æ®æ¥æº <a href="https://finance.yahoo.com" target="_blank">Yahoo Finance</a></li>
        <li>BTC å¹´åŒ–æ”¶ç›Š (70%)ï¼šåŸºäº2020â€“2025é•¿æœŸå¤åˆå›æŠ¥ï¼Œæ•°æ®æ¥æº <a href="https://www.coingecko.com" target="_blank">CoinGecko</a></li>
        <li>æ±‡ç‡æ¢ç®—ï¼š1 USD = 7.25 CNYï¼ˆ2025å¹´ä¸­é—´ä»·å‚è€ƒï¼‰</li>
    </ul>
</div>

<script>
    // åˆå§‹åŸå§‹å€¼ï¼ˆå•ä½ï¼šå…ƒï¼‰
    let totalFundRaw = 1000000;   // 100ä¸‡
    let investedAmountRaw = 24000; // å¹´æŠ•èµ„ 2.4ä¸‡ï¼ˆåŸæ¯æœˆ2000ï¼‰

    const RATES = {
        chinaDeposit: 0.015,   // CNY
        hkDeposit: 0.005,      // HKD â†’ æŒ‰CNYè®¡
        usDeposit: 0.043,      // USD
        maotai: 0.20,          // CNY
        hkStock: 0.10,         // HKD â†’ æŒ‰CNYè®¡
        apple: 0.30,           // USD
        nvidia: 0.40,          // USD
        btc: 0.70              // USD
    };

    const EXCHANGE_RATE = 7.25; // 1 USD = 7.25 CNY (2025)
    let displayCurrency = { deposit: 'CNY', stock: 'CNY', crypto: 'USD' };

    // æ™ºèƒ½æ ¼å¼åŒ–
    function smartFormat(value) {
        if (value >= 1e8 && value % 1e8 === 0) return { num: value / 1e8, unit: 'äº¿' };
        if (value >= 1e4 && value % 1e4 === 0) return { num: value / 1e4, unit: 'ä¸‡' };
        return { num: value, unit: 'å…ƒ' };
    }

    function formatDisplay(val) {
        if (val >= 10000) return (val / 10000).toFixed(2) + 'ä¸‡';
        return val.toLocaleString(undefined, { maximumFractionDigits: 2 }) + 'å…ƒ';
    }

    function formatUSD(val) {
        return '$' + val.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function updateDisplay(id, rawValue) {
        const { num, unit } = smartFormat(rawValue);
        document.getElementById(id).value = num;
        document.getElementById('unit-' + id).textContent = unit;
    }

    // åˆå§‹åŒ–
    updateDisplay('totalFund', totalFundRaw);
    updateDisplay('investedAmount', investedAmountRaw);

    // ç»‘å®šè¾“å…¥
    ['totalFund', 'investedAmount'].forEach(id => {
        const input = document.getElementById(id);
        const unitLabel = document.getElementById('unit-' + id);
        let rawRef = id === 'totalFund' ? 'totalFundRaw' : 'investedAmountRaw';

        input.addEventListener('focus', () => {
            input.value = window[rawRef];
            unitLabel.textContent = 'å…ƒ';
        });

        input.addEventListener('blur', () => {
            const num = parseFloat(input.value) || 0;
            const currentUnit = unitLabel.textContent;
            let rawValue = currentUnit === 'äº¿' ? num * 1e8 : (currentUnit === 'ä¸‡' ? num * 1e4 : num);
            window[rawRef] = rawValue;
            updateDisplay(id, rawValue);
            calculate();
        });
    });

    // åˆ‡æ¢è´§å¸æ˜¾ç¤º
    document.getElementById('toggle-deposit').addEventListener('click', () => {
        displayCurrency.deposit = displayCurrency.deposit === 'CNY' ? 'USD' : 'CNY';
        document.getElementById('toggle-deposit').textContent = `æ˜¾ç¤ºï¼š${displayCurrency.deposit}`;
        calculate();
    });
    document.getElementById('toggle-stock').addEventListener('click', () => {
        displayCurrency.stock = displayCurrency.stock === 'CNY' ? 'USD' : 'CNY';
        document.getElementById('toggle-stock').textContent = `æ˜¾ç¤ºï¼š${displayCurrency.stock}`;
        calculate();
    });
    document.getElementById('toggle-crypto').addEventListener('click', () => {
        displayCurrency.crypto = displayCurrency.crypto === 'USD' ? 'CNY' : 'USD';
        document.getElementById('toggle-crypto').textContent = `æ˜¾ç¤ºï¼š${displayCurrency.crypto}`;
        calculate();
    });

    function calculate() {
        const depositAmount = Math.max(0, totalFundRaw - investedAmountRaw);
        const investAmount = investedAmountRaw;

        // å­˜æ¬¾ï¼ˆCNYä¸ºä¸»ï¼‰
        const depositItems = [
            { title: 'ğŸ‡¨ğŸ‡³ ä¸­å›½å­˜æ¬¾', rate: RATES.chinaDeposit, amount: depositAmount, currency: 'CNY', note: '(2025å¹´åŸºå‡†åˆ©ç‡)' },
            { title: 'ğŸ‡­ğŸ‡° æ¸¯å¸å­˜æ¬¾', rate: RATES.hkDeposit, amount: depositAmount, currency: 'CNY', note: '(2025å¹´å¹³å‡)' },
            { title: 'ğŸ‡ºğŸ‡¸ ç¾å›½å­˜æ¬¾', rate: RATES.usDeposit, amount: depositAmount, currency: 'USD', note: '(2025å¹´æ”¿ç­–åˆ©ç‡)' }
        ];

        // è‚¡ç¥¨ï¼ˆAè‚¡/HKä¸ºCNYï¼Œç¾è‚¡ä¸ºUSDï¼‰
        const stockItems = [
            { title: 'ğŸ¶ èŒ…å° (Aè‚¡)', rate: RATES.maotai, amount: investAmount, currency: 'CNY', note: '(2023â€“2025å¹´åŒ–)' },
            { title: 'ğŸ‡­ğŸ‡° æ¸¯è‚¡å¹³å‡', rate: RATES.hkStock, amount: investAmount, currency: 'CNY', note: '(2023â€“2025å¹´åŒ–)' },
            { title: 'ğŸ è‹¹æœ (ç¾è‚¡)', rate: RATES.apple, amount: investAmount, currency: 'USD', note: '(2023â€“2025å¹´åŒ–)' },
            { title: 'ğŸ® è‹±ä¼Ÿè¾¾ (ç¾è‚¡)', rate: RATES.nvidia, amount: investAmount, currency: 'USD', note: '(2023â€“2025å¹´åŒ–)' }
        ];

        // åŠ å¯†è´§å¸ï¼ˆUSDï¼‰
        const cryptoItems = [
            { title: 'â‚¿ BTC', rate: RATES.btc, amount: investAmount, currency: 'USD', note: '(2020â€“2025é•¿æœŸå¹´åŒ–)' }
        ];

        function render(items, containerId, className, toggleKey) {
            const container = document.getElementById(containerId);
            container.innerHTML = items.map(item => {
                letæ”¶ç›Š = item.amount * item.rate;
                let displayText;

                if (item.currency === 'CNY') {
                    if (displayCurrency[toggleKey] === 'CNY') {
                        displayText = '+' + formatDisplay(æ”¶ç›Š);
                    } else {
                        displayText = '+' + formatUSD(æ”¶ç›Š / EXCHANGE_RATE);
                    }
                } else { // USD
                    if (displayCurrency[toggleKey] === 'USD') {
                        displayText = '+' + formatUSD(æ”¶ç›Š);
                    } else {
                        displayText = '+' + formatDisplay(æ”¶ç›Š * EXCHANGE_RATE);
                    }
                }

                return `
          <div class="result-card ${className}">
            <div class="result-title">${item.title}</div>
            <div class="result-value">${displayText}</div>
            <div class="note">${item.note}</div>
          </div>
        `;
            }).join('');
        }

        render(depositItems, 'deposit-results', 'deposit', 'deposit');
        render(stockItems, 'stock-results', 'stock', 'stock');
        render(cryptoItems, 'crypto-results', 'crypto', 'crypto');
    }

    calculate();
</script>

</body>
</html>