<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ä¸ªäººèµ„é‡‘ç®¡ç†è®¡ç®—å™¨</title>
    <style>
        body {
            font-family: "Helvetica Neue", "PingFang SC", "Microsoft YaHei", sans-serif;
            background: #f9fafb;
            color: #333;
            padding: 20px;
            max-width: 960px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 24px;
        }
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 20px;
        }
        .input-item {
            flex: 1;
            min-width: 200px;
            position: relative;
        }
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            color: #4a5568;
        }
        .input-with-unit {
            display: flex;
            align-items: center;
        }
        .input-with-unit input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 8px 0 0 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .unit-label {
            background: #edf2f7;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-left: none;
            border-radius: 0 8px 8px 0;
            font-size: 16px;
            color: #4a5568;
            min-width: 50px;
            text-align: center;
        }
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin: 16px 0 12px;
            color: #2d3748;
            padding-bottom: 6px;
            border-bottom: 1px solid #e2e8f0;
        }
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }
        .result-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 14px;
            text-align: center;
        }
        .deposit { border-top: 4px solid #4299e1; }
        .stock { border-top: 4px solid #38a169; }
        .crypto { border-top: 4px solid #e53e3e; }
        .result-title {
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 14px;
            color: #2d3748;
        }
        .result-value {
            font-size: 18px;
            font-weight: bold;
            margin: 6px 0;
        }
        .deposit .result-value { color: #2b6cb0; }
        .stock .result-value { color: #2f855a; }
        .crypto .result-value { color: #c53030; }
        .note {
            font-size: 12px;
            color: #718096;
        }
        .sources {
            font-size: 13px;
            color: #718096;
            margin-top: 20px;
            padding-top: 16px;
            border-top: 1px dashed #e2e8f0;
        }
        .sources a {
            color: #4299e1;
            text-decoration: none;
        }
        .sources a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<h1>ğŸ’° ä¸ªäººèµ„é‡‘ç®¡ç†è®¡ç®—å™¨</h1>

<div class="card">
    <div class="input-group">
        <div class="input-item">
            <label for="totalFund">å½“å‰èµ„é‡‘æ€»é¢</label>
            <div class="input-with-unit">
                <input type="text" id="totalFund" value="1000000" placeholder="è¯·è¾“å…¥é‡‘é¢">
                <div class="unit-label" id="unit-totalFund">å…ƒ</div>
            </div>
        </div>
        <div class="input-item">
            <label for="monthlySalary">æ¯æœˆè–ªæ°´</label>
            <div class="input-with-unit">
                <input type="text" id="monthlySalary" value="20000" placeholder="è¯·è¾“å…¥é‡‘é¢">
                <div class="unit-label" id="unit-monthlySalary">å…ƒ</div>
            </div>
        </div>
        <div class="input-item">
            <label for="monthlyInvest">æ¯æœˆæŠ•èµ„é‡‘é¢</label>
            <div class="input-with-unit">
                <input type="text" id="monthlyInvest" value="2000" placeholder="è¯·è¾“å…¥é‡‘é¢">
                <div class="unit-label" id="unit-monthlyInvest">å…ƒ</div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="section-title">ğŸ¦ é“¶è¡Œå­˜æ¬¾ï¼ˆå¹´åŒ–æ”¶ç›Šï¼‰</div>
    <div class="results-grid" id="deposit-results"></div>

    <div class="section-title">ğŸ“ˆ è‚¡ç¥¨è¯åˆ¸ï¼ˆå¹´åŒ–æ”¶ç›Šï¼‰</div>
    <div class="results-grid" id="stock-results"></div>

    <div class="section-title">â‚¿ åŠ å¯†è´§å¸ï¼ˆå¹´åŒ–æ”¶ç›Šï¼‰</div>
    <div class="results-grid" id="crypto-results"></div>
</div>

<div class="card sources">
    <strong>æ•°æ®æ¥æºï¼š</strong>
    <ul style="margin-top: 8px; padding-left: 20px;">
        <li>ä¸­å›½å­˜æ¬¾åˆ©ç‡ï¼š<a href="http://www.pbc.gov.cn" target="_blank">ä¸­å›½äººæ°‘é“¶è¡Œå®˜ç½‘</a></li>
        <li>ç¾å›½å­˜æ¬¾åˆ©ç‡ï¼š<a href="https://www.federalreserve.gov" target="_blank">ç¾è”å‚¨ (Federal Reserve)</a></li>
        <li>æ¸¯å¸åˆ©ç‡å‚è€ƒï¼š<a href="https://www.hkab.org.hk" target="_blank">é¦™æ¸¯é“¶è¡Œå…¬ä¼š</a></li>
        <li>å†å²æ”¶ç›Šç‡ï¼ˆèŒ…å°ã€è‹¹æœã€è‹±ä¼Ÿè¾¾ç­‰ï¼‰åŸºäºè¿‘3å¹´å¹³å‡å›æŠ¥ä¼°ç®—ï¼Œæ•°æ®å‚è€ƒï¼š<a href="https://finance.yahoo.com" target="_blank">Yahoo Finance</a></li>
        <li>BTC å¹´åŒ–æ³¢åŠ¨å¤§ï¼Œ70%ä¸ºé•¿æœŸå¤åˆå¹´åŒ–å‚è€ƒå€¼ï¼Œæ•°æ®æ¥æºï¼š<a href="https://www.coingecko.com" target="_blank">CoinGecko</a></li>
    </ul>
</div>

<script>
    // åˆå§‹åŸå§‹å€¼ï¼ˆå•ä½ï¼šå…ƒï¼‰
    let totalFundRaw = 1000000;   // 100ä¸‡
    let monthlySalaryRaw = 20000; // 2ä¸‡
    let monthlyInvestRaw = 2000;  // 2000å…ƒ

    const RATES = {
        chinaDeposit: 0.015,
        hkDeposit: 0.005,
        usDeposit: 0.043,
        maotai: 0.20,
        hkStock: 0.10,
        apple: 0.30,
        nvidia: 0.40,
        btc: 0.70
    };

    // æ™ºèƒ½æ ¼å¼åŒ–æ•°å­—ä¸ºâ€œå€¼+å•ä½â€
    function smartFormat(value) {
        if (value >= 1e8 && value % 1e8 === 0) {
            return { num: value / 1e8, unit: 'äº¿' };
        } else if (value >= 1e4 && value % 1e4 === 0) {
            return { num: value / 1e4, unit: 'ä¸‡' };
        } else {
            return { num: value, unit: 'å…ƒ' };
        }
    }

    // æ ¼å¼åŒ–æ”¶ç›Šæ˜¾ç¤º
    function formatDisplay(val) {
        if (val >= 10000) {
            return (val / 10000).toFixed(2) + 'ä¸‡';
        } else {
            return val.toLocaleString(undefined, { maximumFractionDigits: 2 }) + 'å…ƒ';
        }
    }

    // æ›´æ–°æ˜¾ç¤ºï¼ˆç”¨äºåˆå§‹åŒ–æˆ– blur æ—¶ï¼‰
    function updateDisplay(id, rawValue) {
        const { num, unit } = smartFormat(rawValue);
        document.getElementById(id).value = num;
        document.getElementById('unit-' + id).textContent = unit;
    }

    // åˆå§‹åŒ–æ˜¾ç¤º
    updateDisplay('totalFund', totalFundRaw);
    updateDisplay('monthlySalary', monthlySalaryRaw);
    updateDisplay('monthlyInvest', monthlyInvestRaw);

    // ç»‘å®šäº¤äº’
    ['totalFund', 'monthlySalary', 'monthlyInvest'].forEach(id => {
        const input = document.getElementById(id);
        const unitLabel = document.getElementById('unit-' + id);

        // ç”¨æˆ·ç‚¹å‡»/èšç„¦ï¼šåˆ‡æ¢ä¸ºâ€œå…ƒâ€å•ä½ï¼Œæ˜¾ç¤ºå®Œæ•´æ•°å€¼
        input.addEventListener('focus', () => {
            let raw;
            if (id === 'totalFund') raw = totalFundRaw;
            else if (id === 'monthlySalary') raw = monthlySalaryRaw;
            else raw = monthlyInvestRaw;
            input.value = raw;
            unitLabel.textContent = 'å…ƒ';
        });

        // ç”¨æˆ·ç¦»å¼€ï¼šé‡æ–°æ™ºèƒ½æ ¼å¼åŒ–
        input.addEventListener('blur', () => {
            const num = parseFloat(input.value) || 0;
            const currentUnit = unitLabel.textContent;

            // æ ¹æ®å½“å‰å•ä½è¿˜åŸåŸå§‹å€¼
            let rawValue;
            if (currentUnit === 'äº¿') rawValue = num * 1e8;
            else if (currentUnit === 'ä¸‡') rawValue = num * 1e4;
            else rawValue = num;

            // ä¿å­˜åŸå§‹å€¼
            if (id === 'totalFund') totalFundRaw = rawValue;
            else if (id === 'monthlySalary') monthlySalaryRaw = rawValue;
            else monthlyInvestRaw = rawValue;

            // é‡æ–°æ™ºèƒ½æ˜¾ç¤º
            updateDisplay(id, rawValue);
            calculate();
        });
    });

    function calculate() {
        const annualInvest = monthlyInvestRaw * 12;
        const depositAmount = Math.max(0, totalFundRaw - annualInvest);

        const depositItems = [
            { title: 'ğŸ‡¨ğŸ‡³ ä¸­å›½å­˜æ¬¾', rate: RATES.chinaDeposit, amount: depositAmount },
            { title: 'ğŸ‡­ğŸ‡° æ¸¯å¸å­˜æ¬¾', rate: RATES.hkDeposit, amount: depositAmount },
            { title: 'ğŸ‡ºğŸ‡¸ ç¾å›½å­˜æ¬¾', rate: RATES.usDeposit, amount: depositAmount }
        ];

        const stockItems = [
            { title: 'ğŸ¶ èŒ…å° (Aè‚¡)', rate: RATES.maotai, amount: annualInvest },
            { title: 'ğŸ‡­ğŸ‡° æ¸¯è‚¡å¹³å‡', rate: RATES.hkStock, amount: annualInvest },
            { title: 'ğŸ è‹¹æœ (ç¾è‚¡)', rate: RATES.apple, amount: annualInvest },
            { title: 'ğŸ® è‹±ä¼Ÿè¾¾ (ç¾è‚¡)', rate: RATES.nvidia, amount: annualInvest }
        ];

        const cryptoItems = [
            { title: 'â‚¿ BTC', rate: RATES.btc, amount: annualInvest }
        ];

        function render(items, containerId, className) {
            const container = document.getElementById(containerId);
            container.innerHTML = items.map(item => `
        <div class="result-card ${className}">
          <div class="result-title">${item.title}</div>
          <div class="result-value">+${formatDisplay(item.amount * item.rate)}</div>
          <div class="note">å¹´åŒ– ${(item.rate * 100).toFixed(1)}%</div>
        </div>
      `).join('');
        }

        render(depositItems, 'deposit-results', 'deposit');
        render(stockItems, 'stock-results', 'stock');
        render(cryptoItems, 'crypto-results', 'crypto');
    }

    // åˆå§‹è®¡ç®—
    calculate();
</script>

</body>
</html>